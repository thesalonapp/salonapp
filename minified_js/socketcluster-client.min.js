!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;(e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).socketClusterClient=t()}}(function(){return(function(){function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){return i(e[s][1][t]||t)},h,h.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}return t})()({1:[function(t,e,n){(function(t){(function(){function n(){this._internalStorage={},this.isLocalStorageEnabled=this._checkLocalStorageEnabled()}n.prototype._checkLocalStorageEnabled=function(){let e;try{t.localStorage,t.localStorage.setItem("__scLocalStorageTest",1),t.localStorage.removeItem("__scLocalStorageTest")}catch(n){e=n}return!e},n.prototype.saveToken=function(e,n,r){return this.isLocalStorageEnabled&&t.localStorage?t.localStorage.setItem(e,n):this._internalStorage[e]=n,Promise.resolve(n)},n.prototype.removeToken=function(e){let n=this.loadToken(e);return this.isLocalStorageEnabled&&t.localStorage?t.localStorage.removeItem(e):delete this._internalStorage[e],n},n.prototype.loadToken=function(e){let n;return Promise.resolve(n=this.isLocalStorageEnabled&&t.localStorage?t.localStorage.getItem(e):this._internalStorage[e]||null)},e.exports=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){(function(n){(function(){let r=t("stream-demux"),i=t("async-stream-emitter"),o=t("ag-channel"),s=t("./auth"),a=t("sc-formatter"),u=t("./transport"),c=t("querystring"),h=t("linked-list"),l=t("clone-deep"),f=t("buffer/").Buffer,$=t("./wait"),p=t("sc-errors"),d=p.InvalidArgumentsError,m=p.InvalidMessageError;p.InvalidActionError;let y=p.SocketProtocolError,g=p.TimeoutError,x=p.BadConnectionError,_="undefined"!=typeof window;function v(t){i.call(this);let e=Object.assign({path:"/socketcluster/",secure:!1,protocolScheme:null,socketPath:null,autoConnect:!0,autoReconnect:!0,autoSubscribeOnConnect:!0,connectTimeout:2e4,ackTimeout:1e4,timestampRequests:!1,timestampParam:"t",authTokenName:"socketcluster.authToken",binaryType:"arraybuffer",batchOnHandshake:!1,batchOnHandshakeDuration:100,batchInterval:50,protocolVersion:2,wsOptions:{},cloneData:!1},t);this.id=null,this.version=e.version||null,this.protocolVersion=e.protocolVersion,this.state=this.CLOSED,this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null,this.pendingReconnect=!1,this.pendingReconnectTimeout=null,this.preparingPendingSubscriptions=!1,this.clientId=e.clientId,this.wsOptions=e.wsOptions,this.connectTimeout=e.connectTimeout,this.ackTimeout=e.ackTimeout,this.channelPrefix=e.channelPrefix||null,this.disconnectOnUnload=null==e.disconnectOnUnload||e.disconnectOnUnload,this.authTokenName=e.authTokenName,e.pingTimeout=e.connectTimeout,this.pingTimeout=e.pingTimeout,this.pingTimeoutDisabled=!!e.pingTimeoutDisabled;let o=t=>{if(this[t]>2147483647)throw new d(`The ${t} value provided exceeded the maximum amount allowed`)};if(o("connectTimeout"),o("ackTimeout"),o("pingTimeout"),this.connectAttempts=0,this.isBatching=!1,this.batchOnHandshake=e.batchOnHandshake,this.batchOnHandshakeDuration=e.batchOnHandshakeDuration,this._batchingIntervalId=null,this._outboundBuffer=new h,this._channelMap={},this._channelEventDemux=new r,this._channelDataDemux=new r,this._receiverDemux=new r,this._procedureDemux=new r,this.options=e,this._cid=1,this.options.callIdGenerator=()=>this._cid++,this.options.autoReconnect){null==this.options.autoReconnectOptions&&(this.options.autoReconnectOptions={});let u=this.options.autoReconnectOptions;null==u.initialDelay&&(u.initialDelay=1e4),null==u.randomness&&(u.randomness=1e4),null==u.multiplier&&(u.multiplier=1.5),null==u.maxDelay&&(u.maxDelay=6e4)}if(null==this.options.subscriptionRetryOptions&&(this.options.subscriptionRetryOptions={}),this.options.authEngine?this.auth=this.options.authEngine:this.auth=new s,this.options.codecEngine?this.codec=this.options.codecEngine:this.codec=a,this.options.protocol){let l=new d('The "protocol" option does not affect socketcluster-client - If you want to utilize SSL/TLS, use "secure" option instead');this._onError(l)}this.options.query=e.query||{},"string"==typeof this.options.query&&(this.options.query=c.parse(this.options.query)),_&&this.disconnectOnUnload&&n.addEventListener&&n.removeEventListener&&this._handleBrowserUnload(),this.options.autoConnect&&this.connect()}v.prototype=Object.create(i.prototype),v.CONNECTING=v.prototype.CONNECTING=u.prototype.CONNECTING,v.OPEN=v.prototype.OPEN=u.prototype.OPEN,v.CLOSED=v.prototype.CLOSED=u.prototype.CLOSED,v.AUTHENTICATED=v.prototype.AUTHENTICATED="authenticated",v.UNAUTHENTICATED=v.prototype.UNAUTHENTICATED="unauthenticated",v.SUBSCRIBED=v.prototype.SUBSCRIBED=o.SUBSCRIBED,v.PENDING=v.prototype.PENDING=o.PENDING,v.UNSUBSCRIBED=v.prototype.UNSUBSCRIBED=o.UNSUBSCRIBED,v.ignoreStatuses=p.socketProtocolIgnoreStatuses,v.errorStatuses=p.socketProtocolErrorStatuses,Object.defineProperty(v.prototype,"isBufferingBatch",{get:function(){return this.transport.isBufferingBatch}}),v.prototype.getBackpressure=function(){return Math.max(this.getAllListenersBackpressure(),this.getAllReceiversBackpressure(),this.getAllProceduresBackpressure(),this.getAllChannelsBackpressure())},v.prototype._handleBrowserUnload=async function(){let t=()=>{this.disconnect()},e=!1,r=()=>{e||(e=!0,n.addEventListener("beforeunload",t,!1))},i=()=>{e&&(e=!1,n.removeEventListener("beforeunload",t,!1))};(async()=>{let t=this.listener("connecting").createConsumer();for(;!(await t.next()).done;){r()}})(),(async()=>{let t=this.listener("close").createConsumer();for(;!(await t.next()).done;){i()}})()},v.prototype._setAuthToken=function(t){this._changeToAuthenticatedState(t.token),(async()=>{try{await this.auth.saveToken(this.authTokenName,t.token,{})}catch(e){this._onError(e)}})()},v.prototype._removeAuthToken=function(t){(async()=>{let t;try{t=await this.auth.removeToken(this.authTokenName)}catch(e){this._onError(e);return}this.emit("removeAuthToken",{oldAuthToken:t})})(),this._changeToUnauthenticatedStateAndClearTokens()},v.prototype._privateDataHandlerMap={"#publish":function(t){let e=this._undecorateChannelName(t.channel);this.isSubscribed(e,!0)&&this._channelDataDemux.write(e,t.data)},"#kickOut":function(t){let e=this._undecorateChannelName(t.channel),n=this._channelMap[e];n&&(this.emit("kickOut",{channel:e,message:t.message}),this._channelEventDemux.write(`${e}/kickOut`,{message:t.message}),this._triggerChannelUnsubscribe(n))},"#setAuthToken":function(t){t&&this._setAuthToken(t)},"#removeAuthToken":function(t){this._removeAuthToken(t)}},v.prototype._privateRPCHandlerMap={"#setAuthToken":function(t,e){t?(this._setAuthToken(t),e.end()):e.error(new m("No token data provided by #setAuthToken event"))},"#removeAuthToken":function(t,e){this._removeAuthToken(t),e.end()}},v.prototype.getState=function(){return this.state},v.prototype.getBytesReceived=function(){return this.transport.getBytesReceived()},v.prototype.deauthenticate=async function(){(async()=>{let t;try{t=await this.auth.removeToken(this.authTokenName)}catch(e){this._onError(e);return}this.emit("removeAuthToken",{oldAuthToken:t})})(),this.state!==this.CLOSED&&this.transmit("#removeAuthToken"),this._changeToUnauthenticatedStateAndClearTokens(),await $(0)},v.prototype.connect=function(){this.state===this.CLOSED&&(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this.state=this.CONNECTING,this.emit("connecting",{}),this.transport&&this.transport.clearAllListeners(),this.transport=new u(this.auth,this.codec,this.options,this.wsOptions,{onOpen:t=>{this.state=this.OPEN,this._onOpen(t)},onOpenAbort:t=>{this.state!==this.CLOSED&&(this.state=this.CLOSED,this._destroy(t.code,t.reason,!0))},onClose:t=>{this.state!==this.CLOSED&&(this.state=this.CLOSED,this._destroy(t.code,t.reason))},onEvent:t=>{this.emit(t.event,t.data)},onError:t=>{this._onError(t.error)},onInboundInvoke:t=>{this._onInboundInvoke(t)},onInboundTransmit:t=>{this._onInboundTransmit(t.event,t.data)}}))},v.prototype.reconnect=function(t,e){this.disconnect(t,e),this.connect()},v.prototype.disconnect=function(t,e){if("number"!=typeof(t=t||1e3))throw new d("If specified, the code argument must be a number");let n=this.state===this.CONNECTING;n||this.state===this.OPEN?(this.state=this.CLOSED,this._destroy(t,e,n),this.transport.close(t,e)):(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef))},v.prototype._changeToUnauthenticatedStateAndClearTokens=function(){if(this.authState!==this.UNAUTHENTICATED){let t=this.authState,e=this.authToken,n=this.signedAuthToken;this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null;let r={oldAuthState:t,newAuthState:this.authState};this.emit("authStateChange",r),this.emit("deauthenticate",{oldSignedAuthToken:n,oldAuthToken:e})}},v.prototype._changeToAuthenticatedState=function(t){if(this.signedAuthToken=t,this.authToken=this._extractAuthTokenData(t),this.authState!==this.AUTHENTICATED){let e=this.authState;this.authState=this.AUTHENTICATED;let n={oldAuthState:e,newAuthState:this.authState,signedAuthToken:t,authToken:this.authToken};this.preparingPendingSubscriptions||this.processPendingSubscriptions(),this.emit("authStateChange",n)}this.emit("authenticate",{signedAuthToken:t,authToken:this.authToken})},v.prototype.decodeBase64=function(t){return f.from(t,"base64").toString("utf8")},v.prototype.encodeBase64=function(t){return f.from(t,"utf8").toString("base64")},v.prototype._extractAuthTokenData=function(t){let e=(t||"").split(".")[1];if(null!=e){let n=e;try{return n=this.decodeBase64(n),JSON.parse(n)}catch(r){return n}}return null},v.prototype.getAuthToken=function(){return this.authToken},v.prototype.getSignedAuthToken=function(){return this.signedAuthToken},v.prototype.authenticate=async function(t){let e;try{e=await this.invoke("#authenticate",t)}catch(n){throw"BadConnectionError"!==n.name&&"TimeoutError"!==n.name&&this._changeToUnauthenticatedStateAndClearTokens(),await $(0),n}return e&&null!=e.isAuthenticated?e.authError&&(e.authError=p.hydrateError(e.authError)):e={isAuthenticated:this.authState,authError:null},e.isAuthenticated?this._changeToAuthenticatedState(t):this._changeToUnauthenticatedStateAndClearTokens(),(async()=>{try{await this.auth.saveToken(this.authTokenName,t,{})}catch(e){this._onError(e)}})(),await $(0),e},v.prototype._tryReconnect=function(t){let e=this.connectAttempts++,n=this.options.autoReconnectOptions,r;(r=null==t||e>0?Math.round(Math.round(n.initialDelay+(n.randomness||0)*Math.random())*Math.pow(n.multiplier,e)):t)>n.maxDelay&&(r=n.maxDelay),clearTimeout(this._reconnectTimeoutRef),this.pendingReconnect=!0,this.pendingReconnectTimeout=r,this._reconnectTimeoutRef=setTimeout(()=>{this.connect()},r)},v.prototype._onOpen=function(t){this.isBatching?this._startBatching():this.batchOnHandshake&&(this._startBatching(),setTimeout(()=>{this.isBatching||this._stopBatching()},this.batchOnHandshakeDuration)),this.preparingPendingSubscriptions=!0,t?(this.id=t.id,this.pingTimeout=t.pingTimeout,t.isAuthenticated?this._changeToAuthenticatedState(t.authToken):this._changeToUnauthenticatedStateAndClearTokens()):this._changeToUnauthenticatedStateAndClearTokens(),this.connectAttempts=0,this.options.autoSubscribeOnConnect&&this.processPendingSubscriptions(),this.emit("connect",{...t,processPendingSubscriptions:()=>{this.processPendingSubscriptions()}}),this.state===this.OPEN&&this._flushOutboundBuffer()},v.prototype._onError=function(t){this.emit("error",{error:t})},v.prototype._suspendSubscriptions=function(){Object.keys(this._channelMap).forEach(t=>{let e=this._channelMap[t];this._triggerChannelUnsubscribe(e,!0)})},v.prototype._abortAllPendingEventsDueToBadConnection=function(t){let e=this._outboundBuffer.head,n;for(;e;){n=e.next;let r=e.data;clearTimeout(r.timeout),delete r.timeout,e.detach(),e=n;let i=r.callback;if(i){delete r.callback;let o=`Event "${r.event}" was aborted due to a bad connection`,s=new x(o,t);i.call(r,s,r)}r.cid&&this.transport.cancelPendingResponse(r.cid)}},v.prototype._destroy=function(t,e,n){if(this.id=null,this._cancelBatching(),this.transport&&this.transport.clearAllListeners(),this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this._suspendSubscriptions(),n?this.emit("connectAbort",{code:t,reason:e}):this.emit("disconnect",{code:t,reason:e}),this.emit("close",{code:t,reason:e}),!v.ignoreStatuses[t]){let r;r=e?"Socket connection closed with status code "+t+" and reason: "+e:"Socket connection closed with status code "+t;let i=new y(v.errorStatuses[t]||r,t);this._onError(i)}this._abortAllPendingEventsDueToBadConnection(n?"connectAbort":"disconnect"),this.options.autoReconnect&&(4e3===t||4001===t||1005===t?this._tryReconnect(0):1e3!==t&&t<4500&&this._tryReconnect())},v.prototype._onInboundTransmit=function(t,e){let n=this._privateDataHandlerMap[t];n?n.call(this,e):this._receiverDemux.write(t,e)},v.prototype._onInboundInvoke=function(t){let{procedure:e,data:n}=t,r=this._privateRPCHandlerMap[e];r?r.call(this,n,t):this._procedureDemux.write(e,t)},v.prototype.decode=function(t){return this.transport.decode(t)},v.prototype.encode=function(t){return this.transport.encode(t)},v.prototype._flushOutboundBuffer=function(){let t=this._outboundBuffer.head,e;for(;t;){e=t.next;let n=t.data;t.detach(),this.transport.transmitObject(n),t=e}},v.prototype._handleEventAckTimeout=function(t,e){e&&e.detach(),delete t.timeout;let n=t.callback;if(n){delete t.callback;let r=new g(`Event response for "${t.event}" timed out`);n.call(t,r,t)}t.cid&&this.transport.cancelPendingResponse(t.cid)},v.prototype._processOutboundEvent=function(t,e,n,r){n=n||{},this.state===this.CLOSED&&this.connect();let i={event:t},o;o=r?new Promise((t,e)=>{i.callback=(n,r)=>{if(n){e(n);return}t(r)}}):Promise.resolve();let s=new h.Item;this.options.cloneData?i.data=l(e):i.data=e,s.data=i;let a=null==n.ackTimeout?this.ackTimeout:n.ackTimeout;return i.timeout=setTimeout(()=>{this._handleEventAckTimeout(i,s)},a),this._outboundBuffer.append(s),this.state===this.OPEN&&this._flushOutboundBuffer(),o},v.prototype.send=function(t){this.transport.send(t)},v.prototype.transmit=function(t,e,n){return this._processOutboundEvent(t,e,n)},v.prototype.invoke=function(t,e,n){return this._processOutboundEvent(t,e,n,!0)},v.prototype.transmitPublish=function(t,e){let n={channel:this._decorateChannelName(t),data:e};return this.transmit("#publish",n)},v.prototype.invokePublish=function(t,e){let n={channel:this._decorateChannelName(t),data:e};return this.invoke("#publish",n)},v.prototype._triggerChannelSubscribe=function(t,e){let n=t.name;if(t.state!==o.SUBSCRIBED){let r=t.state;t.state=o.SUBSCRIBED;let i={oldChannelState:r,newChannelState:t.state,subscriptionOptions:e};this._channelEventDemux.write(`${n}/subscribeStateChange`,i),this._channelEventDemux.write(`${n}/subscribe`,{subscriptionOptions:e}),this.emit("subscribeStateChange",{channel:n,...i}),this.emit("subscribe",{channel:n,subscriptionOptions:e})}},v.prototype._triggerChannelSubscribeFail=function(t,e,n){let r=e.name,i=!e.options.waitForAuth||this.authState===this.AUTHENTICATED;this._channelMap[r]&&i&&(delete this._channelMap[r],this._channelEventDemux.write(`${r}/subscribeFail`,{error:t,subscriptionOptions:n}),this.emit("subscribeFail",{error:t,channel:r,subscriptionOptions:n}))},v.prototype._cancelPendingSubscribeCallback=function(t){null!=t._pendingSubscriptionCid&&(this.transport.cancelPendingResponse(t._pendingSubscriptionCid),delete t._pendingSubscriptionCid)},v.prototype._decorateChannelName=function(t){return this.channelPrefix&&(t=this.channelPrefix+t),t},v.prototype._undecorateChannelName=function(t){return this.channelPrefix&&0===t.indexOf(this.channelPrefix)?t.replace(this.channelPrefix,""):t},v.prototype.startBatch=function(){this.transport.startBatch()},v.prototype.flushBatch=function(){this.transport.flushBatch()},v.prototype.cancelBatch=function(){this.transport.cancelBatch()},v.prototype._startBatching=function(){null==this._batchingIntervalId&&(this.startBatch(),this._batchingIntervalId=setInterval(()=>{this.flushBatch(),this.startBatch()},this.options.batchInterval))},v.prototype.startBatching=function(){this.isBatching=!0,this._startBatching()},v.prototype._stopBatching=function(){null!=this._batchingIntervalId&&clearInterval(this._batchingIntervalId),this._batchingIntervalId=null,this.flushBatch()},v.prototype.stopBatching=function(){this.isBatching=!1,this._stopBatching()},v.prototype._cancelBatching=function(){null!=this._batchingIntervalId&&clearInterval(this._batchingIntervalId),this._batchingIntervalId=null,this.cancelBatch()},v.prototype.cancelBatching=function(){this.isBatching=!1,this._cancelBatching()},v.prototype._trySubscribe=function(t){let e=!t.options.waitForAuth||this.authState===this.AUTHENTICATED;if(this.state===this.OPEN&&!this.preparingPendingSubscriptions&&null==t._pendingSubscriptionCid&&e){let n={noTimeout:!0},r={};t.options.waitForAuth&&(n.waitForAuth=!0,r.waitForAuth=n.waitForAuth),t.options.data&&(r.data=t.options.data),t._pendingSubscriptionCid=this.transport.invokeRaw("#subscribe",{channel:this._decorateChannelName(t.name),...r},n,e=>{e?"BadConnectionError"!==e.name&&(delete t._pendingSubscriptionCid,this._triggerChannelSubscribeFail(e,t,r)):(delete t._pendingSubscriptionCid,this._triggerChannelSubscribe(t,r))}),this.emit("subscribeRequest",{channel:t.name,subscriptionOptions:r})}},v.prototype.subscribe=function(t,e){e=e||{};let n=this._channelMap[t],r={waitForAuth:!!e.waitForAuth};return null!=e.priority&&(r.priority=e.priority),void 0!==e.data&&(r.data=e.data),n?e&&(n.options=r):(n={name:t,state:o.PENDING,options:r},this._channelMap[t]=n,this._trySubscribe(n)),new o(t,this,this._channelEventDemux,this._channelDataDemux)},v.prototype._triggerChannelUnsubscribe=function(t,e){let n=t.name;if(this._cancelPendingSubscribeCallback(t),t.state===o.SUBSCRIBED){let r={oldChannelState:t.state,newChannelState:e?o.PENDING:o.UNSUBSCRIBED};this._channelEventDemux.write(`${n}/subscribeStateChange`,r),this._channelEventDemux.write(`${n}/unsubscribe`,{}),this.emit("subscribeStateChange",{channel:n,...r}),this.emit("unsubscribe",{channel:n})}e?t.state=o.PENDING:delete this._channelMap[n]},v.prototype._tryUnsubscribe=function(t){if(this.state===this.OPEN){this._cancelPendingSubscribeCallback(t);let e=this._decorateChannelName(t.name);this.transport.transmit("#unsubscribe",e,{noTimeout:!0})}},v.prototype.unsubscribe=function(t){let e=this._channelMap[t];e&&(this._triggerChannelUnsubscribe(e),this._tryUnsubscribe(e))},v.prototype.receiver=function(t){return this._receiverDemux.stream(t)},v.prototype.closeReceiver=function(t){this._receiverDemux.close(t)},v.prototype.closeAllReceivers=function(){this._receiverDemux.closeAll()},v.prototype.killReceiver=function(t){this._receiverDemux.kill(t)},v.prototype.killAllReceivers=function(){this._receiverDemux.killAll()},v.prototype.killReceiverConsumer=function(t){this._receiverDemux.killConsumer(t)},v.prototype.getReceiverConsumerStats=function(t){return this._receiverDemux.getConsumerStats(t)},v.prototype.getReceiverConsumerStatsList=function(t){return this._receiverDemux.getConsumerStatsList(t)},v.prototype.getAllReceiversConsumerStatsList=function(){return this._receiverDemux.getConsumerStatsListAll()},v.prototype.getReceiverBackpressure=function(t){return this._receiverDemux.getBackpressure(t)},v.prototype.getAllReceiversBackpressure=function(){return this._receiverDemux.getBackpressureAll()},v.prototype.getReceiverConsumerBackpressure=function(t){return this._receiverDemux.getConsumerBackpressure(t)},v.prototype.hasReceiverConsumer=function(t,e){return this._receiverDemux.hasConsumer(t,e)},v.prototype.hasAnyReceiverConsumer=function(t){return this._receiverDemux.hasConsumerAll(t)},v.prototype.procedure=function(t){return this._procedureDemux.stream(t)},v.prototype.closeProcedure=function(t){this._procedureDemux.close(t)},v.prototype.closeAllProcedures=function(){this._procedureDemux.closeAll()},v.prototype.killProcedure=function(t){this._procedureDemux.kill(t)},v.prototype.killAllProcedures=function(){this._procedureDemux.killAll()},v.prototype.killProcedureConsumer=function(t){this._procedureDemux.killConsumer(t)},v.prototype.getProcedureConsumerStats=function(t){return this._procedureDemux.getConsumerStats(t)},v.prototype.getProcedureConsumerStatsList=function(t){return this._procedureDemux.getConsumerStatsList(t)},v.prototype.getAllProceduresConsumerStatsList=function(){return this._procedureDemux.getConsumerStatsListAll()},v.prototype.getProcedureBackpressure=function(t){return this._procedureDemux.getBackpressure(t)},v.prototype.getAllProceduresBackpressure=function(){return this._procedureDemux.getBackpressureAll()},v.prototype.getProcedureConsumerBackpressure=function(t){return this._procedureDemux.getConsumerBackpressure(t)},v.prototype.hasProcedureConsumer=function(t,e){return this._procedureDemux.hasConsumer(t,e)},v.prototype.hasAnyProcedureConsumer=function(t){return this._procedureDemux.hasConsumerAll(t)},v.prototype.channel=function(t){return this._channelMap[t],new o(t,this,this._channelEventDemux,this._channelDataDemux)},v.prototype.closeChannel=function(t){this.channelCloseOutput(t),this.channelCloseAllListeners(t)},v.prototype.closeAllChannelOutputs=function(){this._channelDataDemux.closeAll()},v.prototype.closeAllChannelListeners=function(){this._channelEventDemux.closeAll()},v.prototype.closeAllChannels=function(){this.closeAllChannelOutputs(),this.closeAllChannelListeners()},v.prototype.killChannel=function(t){this.channelKillOutput(t),this.channelKillAllListeners(t)},v.prototype.killAllChannelOutputs=function(){this._channelDataDemux.killAll()},v.prototype.killAllChannelListeners=function(){this._channelEventDemux.killAll()},v.prototype.killAllChannels=function(){this.killAllChannelOutputs(),this.killAllChannelListeners()},v.prototype.killChannelOutputConsumer=function(t){this._channelDataDemux.killConsumer(t)},v.prototype.killChannelListenerConsumer=function(t){this._channelEventDemux.killConsumer(t)},v.prototype.getChannelOutputConsumerStats=function(t){return this._channelDataDemux.getConsumerStats(t)},v.prototype.getChannelListenerConsumerStats=function(t){return this._channelEventDemux.getConsumerStats(t)},v.prototype.getAllChannelOutputsConsumerStatsList=function(){return this._channelDataDemux.getConsumerStatsListAll()},v.prototype.getAllChannelListenersConsumerStatsList=function(){return this._channelEventDemux.getConsumerStatsListAll()},v.prototype.getChannelBackpressure=function(t){return Math.max(this.channelGetOutputBackpressure(t),this.channelGetAllListenersBackpressure(t))},v.prototype.getAllChannelOutputsBackpressure=function(){return this._channelDataDemux.getBackpressureAll()},v.prototype.getAllChannelListenersBackpressure=function(){return this._channelEventDemux.getBackpressureAll()},v.prototype.getAllChannelsBackpressure=function(){return Math.max(this.getAllChannelOutputsBackpressure(),this.getAllChannelListenersBackpressure())},v.prototype.getChannelListenerConsumerBackpressure=function(t){return this._channelEventDemux.getConsumerBackpressure(t)},v.prototype.getChannelOutputConsumerBackpressure=function(t){return this._channelDataDemux.getConsumerBackpressure(t)},v.prototype.hasAnyChannelOutputConsumer=function(t){return this._channelDataDemux.hasConsumerAll(t)},v.prototype.hasAnyChannelListenerConsumer=function(t){return this._channelEventDemux.hasConsumerAll(t)},v.prototype.getChannelState=function(t){let e=this._channelMap[t];return e?e.state:o.UNSUBSCRIBED},v.prototype.getChannelOptions=function(t){let e=this._channelMap[t];return e?{...e.options}:{}},v.prototype._getAllChannelStreamNames=function(t){return Object.keys(this._channelEventDemux.getConsumerStatsListAll().filter(e=>0===e.stream.indexOf(`${t}/`)).reduce((t,e)=>(t[e.stream]=!0,t),{}))},v.prototype.channelCloseOutput=function(t){this._channelDataDemux.close(t)},v.prototype.channelCloseListener=function(t,e){this._channelEventDemux.close(`${t}/${e}`)},v.prototype.channelCloseAllListeners=function(t){this._getAllChannelStreamNames(t).forEach(t=>{this._channelEventDemux.close(t)})},v.prototype.channelKillOutput=function(t){this._channelDataDemux.kill(t)},v.prototype.channelKillListener=function(t,e){this._channelEventDemux.kill(`${t}/${e}`)},v.prototype.channelKillAllListeners=function(t){this._getAllChannelStreamNames(t).forEach(t=>{this._channelEventDemux.kill(t)})},v.prototype.channelGetOutputConsumerStatsList=function(t){return this._channelDataDemux.getConsumerStatsList(t)},v.prototype.channelGetListenerConsumerStatsList=function(t,e){return this._channelEventDemux.getConsumerStatsList(`${t}/${e}`)},v.prototype.channelGetAllListenersConsumerStatsList=function(t){return this._getAllChannelStreamNames(t).map(t=>this._channelEventDemux.getConsumerStatsList(t)).reduce((t,e)=>(e.forEach(e=>{t.push(e)}),t),[])},v.prototype.channelGetOutputBackpressure=function(t){return this._channelDataDemux.getBackpressure(t)},v.prototype.channelGetListenerBackpressure=function(t,e){return this._channelEventDemux.getBackpressure(`${t}/${e}`)},v.prototype.channelGetAllListenersBackpressure=function(t){return Math.max(...this._getAllChannelStreamNames(t).map(t=>this._channelEventDemux.getBackpressure(t)).concat(0))},v.prototype.channelHasOutputConsumer=function(t,e){return this._channelDataDemux.hasConsumer(t,e)},v.prototype.channelHasListenerConsumer=function(t,e,n){return this._channelEventDemux.hasConsumer(`${t}/${e}`,n)},v.prototype.channelHasAnyListenerConsumer=function(t,e){return this._getAllChannelStreamNames(t).some(t=>this._channelEventDemux.hasConsumer(t,e))},v.prototype.subscriptions=function(t){let e=[];return Object.keys(this._channelMap).forEach(n=>{(t||this._channelMap[n].state===o.SUBSCRIBED)&&e.push(n)}),e},v.prototype.isSubscribed=function(t,e){let n=this._channelMap[t];return e?!!n:!!n&&n.state===o.SUBSCRIBED},v.prototype.processPendingSubscriptions=function(){this.preparingPendingSubscriptions=!1;let t=[];Object.keys(this._channelMap).forEach(e=>{let n=this._channelMap[e];n.state===o.PENDING&&t.push(n)}),t.sort((t,e)=>{let n=t.options.priority||0,r=e.options.priority||0;return n>r?-1:n<r?1:0}),t.forEach(t=>{this._trySubscribe(t)})},e.exports=v}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./auth":1,"./transport":4,"./wait":5,"ag-channel":7,"async-stream-emitter":9,"buffer/":12,"clone-deep":13,"linked-list":20,querystring:23,"sc-errors":25,"sc-formatter":26,"stream-demux":29}],3:[function(t,e,n){(function(n){(function(){let r=t("./clientsocket"),i=t("uuid"),o=t("sc-errors"),s=o.InvalidArgumentsError;e.exports={create:function t(e){var o,a;if((e=e||{}).host&&!e.host.match(/[^:]+:\d{2,5}/))throw new s('The host option should include both the hostname and the port number in the format "hostname:port"');if(e.host&&e.hostname)throw new s('The host option should already include the hostname and the port number in the format "hostname:port" - Because of this, you should never use host and hostname options together');if(e.host&&e.port)throw new s('The host option should already include the hostname and the port number in the format "hostname:port" - Because of this, you should never use host and port options together');let u=n.location&&"https:"===location.protocol,c,h={clientId:i.v4(),port:(o=e,a=u,c=null==o.secure?a:o.secure,o.port||(n.location&&location.port?location.port:c?443:80)),hostname:n.location&&location.hostname||"localhost",secure:u};return Object.assign(h,e),new r(h)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./clientsocket":2,"sc-errors":25,uuid:30}],4:[function(t,e,n){(function(n){(function(){let r=t("ag-request"),i=t("querystring"),o,s;n.WebSocket?(o=n.WebSocket,s=function(t,e){return new o(t)}):(o=t("ws"),s=function(t,e){return new o(t,null,e)});let a=t("sc-errors"),u=a.TimeoutError,c=a.BadConnectionError;function h(t,e,n,r,i){this.state=this.CLOSED,this.auth=t,this.codec=e,this.options=n,this.wsOptions=r,this.protocolVersion=n.protocolVersion,this.connectTimeout=n.connectTimeout,this.pingTimeout=n.pingTimeout,this.pingTimeoutDisabled=!!n.pingTimeoutDisabled,this.callIdGenerator=n.callIdGenerator,this.authTokenName=n.authTokenName,this.isBufferingBatch=!1,this._pingTimeoutTicker=null,this._callbackMap={},this._batchBuffer=[],i||(i={}),this._onOpenHandler=i.onOpen||function(){},this._onOpenAbortHandler=i.onOpenAbort||function(){},this._onCloseHandler=i.onClose||function(){},this._onEventHandler=i.onEvent||function(){},this._onErrorHandler=i.onError||function(){},this._onInboundInvokeHandler=i.onInboundInvoke||function(){},this._onInboundTransmitHandler=i.onInboundTransmit||function(){},this.state=this.CONNECTING;let o=s(this.uri(),r);o.binaryType=this.options.binaryType,this.socket=o,o.onopen=()=>{this._onOpen()},o.onclose=async t=>{let e;e=null==t.code?1005:t.code,this._destroy(e,t.reason)},o.onmessage=(t,e)=>{this._onMessage(t.data)},o.onerror=t=>{this.state===this.CONNECTING&&this._destroy(1006)},this._connectTimeoutRef=setTimeout(()=>{this._destroy(4007),this.socket.close(4007)},this.connectTimeout),1===this.protocolVersion?this._handlePing=t=>"#1"===t&&(this._resetPingTimeout(),this.socket.readyState===this.socket.OPEN&&this.send("#2"),!0):this._handlePing=t=>""===t&&(this._resetPingTimeout(),this.socket.readyState===this.socket.OPEN&&this.send(""),!0)}h.CONNECTING=h.prototype.CONNECTING="connecting",h.OPEN=h.prototype.OPEN="open",h.CLOSED=h.prototype.CLOSED="closed",h.prototype.uri=function(){let t=this.options.query||{},e;e=null==this.options.protocolScheme?this.options.secure?"wss":"ws":this.options.protocolScheme,this.options.timestampRequests&&(t[this.options.timestampParam]=new Date().getTime()),(t=i.encode(t)).length&&(t="?"+t);let n,r;if(null==this.options.socketPath){if(this.options.host)n=this.options.host;else{let o="";this.options.port&&("wss"===e&&443!==this.options.port||"ws"===e&&80!==this.options.port)&&(o=":"+this.options.port),n=this.options.hostname+o}r=this.options.path}else n=this.options.socketPath,r=`:${this.options.path}`;return e+"://"+n+r+t},h.prototype._onOpen=async function(){clearTimeout(this._connectTimeoutRef),this._resetPingTimeout();let t;try{t=await this._handshake()}catch(e){null==e.statusCode&&(e.statusCode=4003),this._onError(e),this._destroy(e.statusCode,e.toString()),this.socket.close(e.statusCode);return}this.state=this.OPEN,t&&(this.pingTimeout=t.pingTimeout),this._resetPingTimeout(),this._onOpenHandler(t)},h.prototype._handshake=async function(){let t=await this.auth.loadToken(this.authTokenName),e=await this.invoke("#handshake",{authToken:t},{force:!0});return e&&(e.authToken=t,e.authError&&(e.authError=a.hydrateError(e.authError))),e},h.prototype._abortAllPendingEventsDueToBadConnection=function(t){Object.keys(this._callbackMap||{}).forEach(e=>{let n=this._callbackMap[e];delete this._callbackMap[e],clearTimeout(n.timeout),delete n.timeout;let r=`Event "${n.event}" was aborted due to a bad connection`,i=new c(r,t),o=n.callback;o&&(delete n.callback,o.call(n,i,n))})},h.prototype._destroy=function(t,e){a.socketProtocolErrorStatuses[t],!e&&a.socketProtocolErrorStatuses[t]&&(e=a.socketProtocolErrorStatuses[t]),delete this.socket.onopen,delete this.socket.onclose,delete this.socket.onmessage,delete this.socket.onerror,clearTimeout(this._connectTimeoutRef),clearTimeout(this._pingTimeoutTicker),this.state===this.OPEN?(this.state=this.CLOSED,this._abortAllPendingEventsDueToBadConnection("disconnect"),this._onCloseHandler({code:t,reason:e})):this.state===this.CONNECTING?(this.state=this.CLOSED,this._abortAllPendingEventsDueToBadConnection("connectAbort"),this._onOpenAbortHandler({code:t,reason:e})):this.state===this.CLOSED&&this._abortAllPendingEventsDueToBadConnection("connectAbort")},h.prototype._processInboundPacket=function(t,e){if(t&&null!=t.event){if(null==t.cid)this._onInboundTransmitHandler({...t});else{let n=new r(this,t.cid,t.event,t.data);this._onInboundInvokeHandler(n)}}else if(t&&null!=t.rid){let i=this._callbackMap[t.rid];if(i&&(clearTimeout(i.timeout),delete i.timeout,delete this._callbackMap[t.rid],i.callback)){let o=a.hydrateError(t.error);i.callback(o,t.data)}}else this._onEventHandler({event:"raw",data:{message:e}})},h.prototype._onMessage=function(t){if(this._onEventHandler({event:"message",data:{message:t}}),this._handlePing(t))return;let e=this.decode(t);if(Array.isArray(e)){let n=e.length;for(let r=0;r<n;r++)this._processInboundPacket(e[r],t)}else this._processInboundPacket(e,t)},h.prototype._onError=function(t){this._onErrorHandler({error:t})},h.prototype._resetPingTimeout=function(){!this.pingTimeoutDisabled&&(new Date().getTime(),clearTimeout(this._pingTimeoutTicker),this._pingTimeoutTicker=setTimeout(()=>{this._destroy(4e3),this.socket.close(4e3)},this.pingTimeout))},h.prototype.clearAllListeners=function(){this._onOpenHandler=function(){},this._onOpenAbortHandler=function(){},this._onCloseHandler=function(){},this._onEventHandler=function(){},this._onErrorHandler=function(){},this._onInboundInvokeHandler=function(){},this._onInboundTransmitHandler=function(){}},h.prototype.startBatch=function(){this.isBufferingBatch=!0,this._batchBuffer=[]},h.prototype.flushBatch=function(){if(this.isBufferingBatch=!1,!this._batchBuffer.length)return;let t=this.serializeObject(this._batchBuffer);this._batchBuffer=[],this.send(t)},h.prototype.cancelBatch=function(){this.isBufferingBatch=!1,this._batchBuffer=[]},h.prototype.getBytesReceived=function(){return this.socket.bytesReceived},h.prototype.close=function(t,e){(this.state===this.OPEN||this.state===this.CONNECTING)&&(t=t||1e3,this._destroy(t,e),this.socket.close(t,e))},h.prototype.transmitObject=function(t){let e={event:t.event,data:t.data};return t.callback&&(e.cid=t.cid=this.callIdGenerator(),this._callbackMap[t.cid]=t),this.sendObject(e),t.cid||null},h.prototype._handleEventAckTimeout=function(t){t.cid&&delete this._callbackMap[t.cid],delete t.timeout;let e=t.callback;if(e){delete t.callback;let n=new u(`Event response for "${t.event}" timed out`);e.call(t,n,t)}},h.prototype.transmit=function(t,e,n){return(this.state===this.OPEN||n.force)&&this.transmitObject({event:t,data:e}),Promise.resolve()},h.prototype.invokeRaw=function(t,e,n,r){let i={event:t,data:e,callback:r};n.noTimeout||(i.timeout=setTimeout(()=>{this._handleEventAckTimeout(i)},this.options.ackTimeout));let o=null;return(this.state===this.OPEN||n.force)&&(o=this.transmitObject(i)),o},h.prototype.invoke=function(t,e,n){return new Promise((r,i)=>{this.invokeRaw(t,e,n,(t,e)=>{if(t){i(t);return}r(e)})})},h.prototype.cancelPendingResponse=function(t){delete this._callbackMap[t]},h.prototype.decode=function(t){return this.codec.decode(t)},h.prototype.encode=function(t){return this.codec.encode(t)},h.prototype.send=function(t){this.socket.readyState!==this.socket.OPEN?this._destroy(1005):this.socket.send(t)},h.prototype.serializeObject=function(t){let e;try{e=this.encode(t)}catch(n){return this._onError(n),null}return e},h.prototype.sendObject=function(t){if(this.isBufferingBatch){this._batchBuffer.push(t);return}let e=this.serializeObject(t);null!=e&&this.send(e)},e.exports=h}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"ag-request":8,querystring:23,"sc-errors":25,ws:6}],5:[function(t,e,n){e.exports=function t(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}},{}],6:[function(t,e,n){let r;r="undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof window&&window||function(){return this}();let i=r.WebSocket||r.MozWebSocket;function o(t,e,n){let r;return e?new i(t,e):new i(t)}i&&(o.prototype=i.prototype),e.exports=i?o:null},{}],7:[function(t,e,n){let r=t("consumable-stream");class i extends r{constructor(t,e,n,r){super(),this.PENDING=i.PENDING,this.SUBSCRIBED=i.SUBSCRIBED,this.UNSUBSCRIBED=i.UNSUBSCRIBED,this.name=t,this.client=e,this._eventDemux=n,this._dataStream=r.stream(this.name)}createConsumer(t){return this._dataStream.createConsumer(t)}listener(t){return this._eventDemux.stream(`${this.name}/${t}`)}close(){this.client.closeChannel(this.name)}kill(){this.client.killChannel(this.name)}killOutputConsumer(t){this.hasOutputConsumer(t)&&this.client.killChannelOutputConsumer(t)}killListenerConsumer(t){this.hasAnyListenerConsumer(t)&&this.client.killChannelListenerConsumer(t)}getOutputConsumerStats(t){if(this.hasOutputConsumer(t))return this.client.getChannelOutputConsumerStats(t)}getListenerConsumerStats(t){if(this.hasAnyListenerConsumer(t))return this.client.getChannelListenerConsumerStats(t)}getBackpressure(){return this.client.getChannelBackpressure(this.name)}getListenerConsumerBackpressure(t){return this.hasAnyListenerConsumer(t)?this.client.getChannelListenerConsumerBackpressure(t):0}getOutputConsumerBackpressure(t){return this.hasOutputConsumer(t)?this.client.getChannelOutputConsumerBackpressure(t):0}closeOutput(){this.client.channelCloseOutput(this.name)}closeListener(t){this.client.channelCloseListener(this.name,t)}closeAllListeners(){this.client.channelCloseAllListeners(this.name)}killOutput(){this.client.channelKillOutput(this.name)}killListener(t){this.client.channelKillListener(this.name,t)}killAllListeners(){this.client.channelKillAllListeners(this.name)}getOutputConsumerStatsList(){return this.client.channelGetOutputConsumerStatsList(this.name)}getListenerConsumerStatsList(t){return this.client.channelGetListenerConsumerStatsList(this.name,t)}getAllListenersConsumerStatsList(){return this.client.channelGetAllListenersConsumerStatsList(this.name)}getOutputBackpressure(){return this.client.channelGetOutputBackpressure(this.name)}getListenerBackpressure(t){return this.client.channelGetListenerBackpressure(this.name,t)}getAllListenersBackpressure(){return this.client.channelGetAllListenersBackpressure(this.name)}hasOutputConsumer(t){return this.client.channelHasOutputConsumer(this.name,t)}hasListenerConsumer(t,e){return this.client.channelHasListenerConsumer(this.name,t,e)}hasAnyListenerConsumer(t){return this.client.channelHasAnyListenerConsumer(this.name,t)}get state(){return this.client.getChannelState(this.name)}set state(t){throw Error("Cannot directly set channel state")}get options(){return this.client.getChannelOptions(this.name)}set options(t){throw Error("Cannot directly set channel options")}subscribe(t){this.client.subscribe(this.name,t)}unsubscribe(){this.client.unsubscribe(this.name)}isSubscribed(t){return this.client.isSubscribed(this.name,t)}transmitPublish(t){return this.client.transmitPublish(this.name,t)}invokePublish(t){return this.client.invokePublish(this.name,t)}}i.PENDING="pending",i.SUBSCRIBED="subscribed",i.UNSUBSCRIBED="unsubscribed",e.exports=i},{"consumable-stream":14}],8:[function(t,e,n){let r=t("sc-errors"),i=r.InvalidActionError;e.exports=function t(e,n,o,s){this.socket=e,this.id=n,this.procedure=o,this.data=s,this.sent=!1,this._respond=(t,e)=>{if(this.sent)throw new i(`Response to request ${this.id} has already been sent`);this.sent=!0,this.socket.sendObject(t,e)},this.end=(t,e)=>{let n={rid:this.id};void 0!==t&&(n.data=t),this._respond(n,e)},this.error=(t,e)=>{let n={rid:this.id,error:r.dehydrateError(t)};this._respond(n,e)}}},{"sc-errors":25}],9:[function(t,e,n){let r=t("stream-demux");function i(){this._listenerDemux=new r}i.prototype.emit=function(t,e){this._listenerDemux.write(t,e)},i.prototype.listener=function(t){return this._listenerDemux.stream(t)},i.prototype.closeListener=function(t){this._listenerDemux.close(t)},i.prototype.closeAllListeners=function(){this._listenerDemux.closeAll()},i.prototype.getListenerConsumerStats=function(t){return this._listenerDemux.getConsumerStats(t)},i.prototype.getListenerConsumerStatsList=function(t){return this._listenerDemux.getConsumerStatsList(t)},i.prototype.getAllListenersConsumerStatsList=function(){return this._listenerDemux.getConsumerStatsListAll()},i.prototype.killListener=function(t){this._listenerDemux.kill(t)},i.prototype.killAllListeners=function(){this._listenerDemux.killAll()},i.prototype.killListenerConsumer=function(t){this._listenerDemux.killConsumer(t)},i.prototype.getListenerBackpressure=function(t){return this._listenerDemux.getBackpressure(t)},i.prototype.getAllListenersBackpressure=function(){return this._listenerDemux.getBackpressureAll()},i.prototype.getListenerConsumerBackpressure=function(t){return this._listenerDemux.getConsumerBackpressure(t)},i.prototype.hasListenerConsumer=function(t,e){return this._listenerDemux.hasConsumer(t,e)},i.prototype.hasAnyListenerConsumer=function(t){return this._listenerDemux.hasConsumerAll(t)},e.exports=i},{"stream-demux":29}],10:[function(t,e,n){"use strict";n.byteLength=function t(e){var n=c(e),r=n[0],i=n[1];return(r+i)*3/4-i},n.toByteArray=function t(e){var n,r,s,a,u,h=c(e),l=h[0],f=h[1],$=new o((a=l,u=f,(a+u)*3/4-u)),p=0,d=f>0?l-4:l;for(r=0;r<d;r+=4)n=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],$[p++]=n>>16&255,$[p++]=n>>8&255,$[p++]=255&n;return 2===f&&(n=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,$[p++]=255&n),1===f&&(n=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,$[p++]=n>>8&255,$[p++]=255&n),$},n.fromByteArray=function t(e){for(var n,i=e.length,o=i%3,s=[],a=0,u=i-o;a<u;a+=16383)s.push(l(e,a,a+16383>u?u:a+16383));return 1===o?s.push(r[(n=e[i-1])>>2]+r[n<<4&63]+"=="):2===o&&s.push(r[(n=(e[i-2]<<8)+e[i-1])>>10]+r[n>>4&63]+r[n<<2&63]+"="),s.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function h(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function l(t,e,n){for(var r,i=[],o=e;o<n;o+=3)i.push(h(r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2])));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],11:[function(t,e,n){(function(e){(function(){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ "use strict";var e=t("base64-js"),r=t("ieee754");function i(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,n){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return u(t)}return s(t,e,n)}function s(t,e,n){if("string"==typeof t)return function t(e,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);var r=0|l(e,n),s=i(r),a=s.write(e,n);return a!==r&&(s=s.slice(0,a)),s}(t,e);if(ArrayBuffer.isView(t))return c(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(U(t,ArrayBuffer)||t&&U(t.buffer,ArrayBuffer))return function t(e,n,r){var i;if(n<0||e.byteLength<n)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(r||0))throw RangeError('"length" is outside of buffer bounds');return(i=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r)).__proto__=o.prototype,i}(t,e,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return o.from(r,e,n);var s=function t(e){if(o.isBuffer(e)){var n=0|h(e.length),r=i(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||function(t){return t!=t}(e.length)?i(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),i(t<0?0:0|h(t))}function c(t){for(var e=t.length<0?0:0|h(t.length),n=i(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function l(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return O(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(t).length;default:if(i)return r?-1:O(t).length;e=(""+e).toLowerCase(),i=!0}}function f(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return w(this,e,n);case"base64":return b(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n);default:if(r)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function $(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function p(t,e,n,r,i){var s;if(0===t.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),s=n=+n,s!=s&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return -1;n=t.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:d(t,e,n,r,i);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):d(t,[e],n,r,i);throw TypeError("val must be string, number or Buffer")}function d(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else -1!==h&&(o-=o-h),h=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){l=!1;break}if(l)return o}return -1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a,u=parseInt(e.substr(2*s,2),16);if(a=u,a!=a)break;t[n+s]=u}return s}function y(t,e,n,r){return N(O(e,t.length-n),t,n,r)}function g(t,e,n,r){return N(function t(e){for(var n=[],r=0;r<e.length;++r)n.push(255&e.charCodeAt(r));return n}(e),t,n,r)}function x(t,e,n,r){return g(t,e,n,r)}function _(t,e,n,r){return N(P(e),t,n,r)}function v(t,e,n,r){return N(function t(e,n){for(var r,i,o,s=[],a=0;a<e.length&&!((n-=2)<0);++a)i=(r=e.charCodeAt(a))>>8,o=r%256,s.push(o),s.push(i);return s}(e,t.length-n),t,n,r)}function b(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(h=c);break;case 2:(192&(o=t[i+1]))==128&&(u=(31&c)<<6|63&o)>127&&(h=u);break;case 3:o=t[i+1],s=t[i+2],(192&o)==128&&(192&s)==128&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=l}return function t(e){var n=e.length;if(n<=4096)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<n;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(r)}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function w(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function E(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=F(t[o]);return i}function S(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function T(t,e,n,r,i,s){if(!o.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw RangeError('"value" argument is out of bounds');if(n+r>t.length)throw RangeError("Index out of range")}function A(t,e,n,r,i,o){if(n+r>t.length||n<0)throw RangeError("Index out of range")}function D(t,e,n,i,o){return e=+e,n>>>=0,o||A(t,e,n,4,34028234663852886e22,-34028234663852886e22),r.write(t,e,n,i,23,4),n+4}function I(t,e,n,i,o){return e=+e,n>>>=0,o||A(t,e,n,8,17976931348623157e292,-17976931348623157e292),r.write(t,e,n,i,52,8),n+8}n.Buffer=o,n.SlowBuffer=function t(e){return+e!=e&&(e=0),o.alloc(+e)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function t(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(n){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,n){return s(t,e,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,n){var r,o,s;return r=t,o=e,s=n,(a(r),r<=0)?i(r):void 0!==o?"string"==typeof s?i(r).fill(o,s):i(r).fill(o):i(r)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function t(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function t(e,n){if(U(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),U(n,Uint8Array)&&(n=o.from(n,n.offset,n.byteLength)),!o.isBuffer(e)||!o.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,i=n.length,s=0,a=Math.min(r,i);s<a;++s)if(e[s]!==n[s]){r=e[s],i=n[s];break}return r<i?-1:i<r?1:0},o.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function t(e,n){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===n)for(r=0,n=0;r<e.length;++r)n+=e[r].length;var r,i=o.allocUnsafe(n),s=0;for(r=0;r<e.length;++r){var a=e[r];if(U(a,Uint8Array)&&(a=o.from(a)),!o.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i},o.byteLength=l,o.prototype._isBuffer=!0,o.prototype.swap16=function t(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)$(this,n,n+1);return this},o.prototype.swap32=function t(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)$(this,n,n+3),$(this,n+1,n+2);return this},o.prototype.swap64=function t(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)$(this,n,n+7),$(this,n+1,n+6),$(this,n+2,n+5),$(this,n+3,n+4);return this},o.prototype.toString=function t(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):f.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function t(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function t(){var e="",r=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o.prototype.compare=function t(e,n,r,i,s){if(U(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),n<0||r>e.length||i<0||s>this.length)throw RangeError("out of range index");if(i>=s&&n>=r)return 0;if(i>=s)return -1;if(n>=r)return 1;if(n>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var a=s-i,u=r-n,c=Math.min(a,u),h=this.slice(i,s),l=e.slice(n,r),f=0;f<c;++f)if(h[f]!==l[f]){a=h[f],u=l[f];break}return a<u?-1:u<a?1:0},o.prototype.includes=function t(e,n,r){return -1!==this.indexOf(e,n,r)},o.prototype.indexOf=function t(e,n,r){return p(this,e,n,r,!0)},o.prototype.lastIndexOf=function t(e,n,r){return p(this,e,n,r,!1)},o.prototype.write=function t(e,n,r,i){if(void 0===n)i="utf8",r=this.length,n=0;else if(void 0===r&&"string"==typeof n)i=n,r=this.length,n=0;else if(isFinite(n))n>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o,s,a,u,c=this.length-n;if((void 0===r||r>c)&&(r=c),e.length>0&&(r<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var h=!1;;)switch(i){case"hex":return m(this,e,n,r);case"utf8":case"utf-8":return y(this,e,n,r);case"ascii":return g(this,e,n,r);case"latin1":case"binary":return o=this,s=e,a=n,g(o,s,a,u=r);case"base64":return _(this,e,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,n,r);default:if(h)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),h=!0}},o.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function t(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),n<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<e&&(n=e);var i=this.subarray(e,n);return i.__proto__=o.prototype,i},o.prototype.readUIntLE=function t(e,n,r){e>>>=0,n>>>=0,r||B(e,n,this.length);for(var i=this[e],o=1,s=0;++s<n&&(o*=256);)i+=this[e+s]*o;return i},o.prototype.readUIntBE=function t(e,n,r){e>>>=0,n>>>=0,r||B(e,n,this.length);for(var i=this[e+--n],o=1;n>0&&(o*=256);)i+=this[e+--n]*o;return i},o.prototype.readUInt8=function t(e,n){return e>>>=0,n||B(e,1,this.length),this[e]},o.prototype.readUInt16LE=function t(e,n){return e>>>=0,n||B(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function t(e,n){return e>>>=0,n||B(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function t(e,n){return e>>>=0,n||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function t(e,n){return e>>>=0,n||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function t(e,n,r){e>>>=0,n>>>=0,r||B(e,n,this.length);for(var i=this[e],o=1,s=0;++s<n&&(o*=256);)i+=this[e+s]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*n)),i},o.prototype.readIntBE=function t(e,n,r){e>>>=0,n>>>=0,r||B(e,n,this.length);for(var i=n,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*n)),s},o.prototype.readInt8=function t(e,n){return(e>>>=0,n||B(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function t(e,n){e>>>=0,n||B(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function t(e,n){e>>>=0,n||B(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function t(e,n){return e>>>=0,n||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function t(e,n){return e>>>=0,n||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function t(e,n){return e>>>=0,n||B(e,4,this.length),r.read(this,e,!0,23,4)},o.prototype.readFloatBE=function t(e,n){return e>>>=0,n||B(e,4,this.length),r.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function t(e,n){return e>>>=0,n||B(e,8,this.length),r.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function t(e,n){return e>>>=0,n||B(e,8,this.length),r.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function t(e,n,r,i){if(e=+e,n>>>=0,r>>>=0,!i){var o=Math.pow(2,8*r)-1;T(this,e,n,r,o,0)}var s=1,a=0;for(this[n]=255&e;++a<r&&(s*=256);)this[n+a]=e/s&255;return n+r},o.prototype.writeUIntBE=function t(e,n,r,i){if(e=+e,n>>>=0,r>>>=0,!i){var o=Math.pow(2,8*r)-1;T(this,e,n,r,o,0)}var s=r-1,a=1;for(this[n+s]=255&e;--s>=0&&(a*=256);)this[n+s]=e/a&255;return n+r},o.prototype.writeUInt8=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,1,255,0),this[n]=255&e,n+1},o.prototype.writeUInt16LE=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,2,65535,0),this[n]=255&e,this[n+1]=e>>>8,n+2},o.prototype.writeUInt16BE=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,2,65535,0),this[n]=e>>>8,this[n+1]=255&e,n+2},o.prototype.writeUInt32LE=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,4,4294967295,0),this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e,n+4},o.prototype.writeUInt32BE=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,4,4294967295,0),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},o.prototype.writeIntLE=function t(e,n,r,i){if(e=+e,n>>>=0,!i){var o=Math.pow(2,8*r-1);T(this,e,n,r,o-1,-o)}var s=0,a=1,u=0;for(this[n]=255&e;++s<r&&(a*=256);)e<0&&0===u&&0!==this[n+s-1]&&(u=1),this[n+s]=(e/a>>0)-u&255;return n+r},o.prototype.writeIntBE=function t(e,n,r,i){if(e=+e,n>>>=0,!i){var o=Math.pow(2,8*r-1);T(this,e,n,r,o-1,-o)}var s=r-1,a=1,u=0;for(this[n+s]=255&e;--s>=0&&(a*=256);)e<0&&0===u&&0!==this[n+s+1]&&(u=1),this[n+s]=(e/a>>0)-u&255;return n+r},o.prototype.writeInt8=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,1,127,-128),e<0&&(e=255+e+1),this[n]=255&e,n+1},o.prototype.writeInt16LE=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,2,32767,-32768),this[n]=255&e,this[n+1]=e>>>8,n+2},o.prototype.writeInt16BE=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,2,32767,-32768),this[n]=e>>>8,this[n+1]=255&e,n+2},o.prototype.writeInt32LE=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,4,2147483647,-2147483648),this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24,n+4},o.prototype.writeInt32BE=function t(e,n,r){return e=+e,n>>>=0,r||T(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},o.prototype.writeFloatLE=function t(e,n,r){return D(this,e,n,!0,r)},o.prototype.writeFloatBE=function t(e,n,r){return D(this,e,n,!1,r)},o.prototype.writeDoubleLE=function t(e,n,r){return I(this,e,n,!0,r)},o.prototype.writeDoubleBE=function t(e,n,r){return I(this,e,n,!1,r)},o.prototype.copy=function t(e,n,r,i){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var s=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,i);else if(this===e&&r<n&&n<i)for(var a=s-1;a>=0;--a)e[a+n]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),n);return s},o.prototype.fill=function t(e,n,r,i){if("string"==typeof e){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){var s,a=e.charCodeAt(0);("utf8"===i&&a<128||"latin1"===i)&&(e=a)}}else"number"==typeof e&&(e&=255);if(n<0||this.length<n||this.length<r)throw RangeError("Out of range index");if(r<=n)return this;if(n>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=n;s<r;++s)this[s]=e;else{var u=o.isBuffer(e)?e:o.from(e,i),c=u.length;if(0===c)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-n;++s)this[s+n]=u[s%c]}return this};var L=/[^+/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function O(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319||s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function P(t){return e.toByteArray(function t(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function N(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length)&&!(i>=t.length);++i)e[i+n]=t[i];return i}function U(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function R(t){return t!=t}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":10,buffer:11,ieee754:15}],12:[function(t,e,n){(function(e){(function(){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ "use strict";var e=t("base64-js"),r=t("ieee754"),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return c(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function t(e,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!s.isEncoding(n))throw TypeError("Unknown encoding: "+n);var r=0|$(e,n),i=o(r),a=i.write(e,n);return a!==r&&(i=i.slice(0,a)),i}(t,e);if(ArrayBuffer.isView(t))return function t(e){if(U(e,Uint8Array)){var n=new Uint8Array(e);return l(n.buffer,n.byteOffset,n.byteLength)}return h(e)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(U(t,ArrayBuffer)||t&&U(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(U(t,SharedArrayBuffer)||t&&U(t.buffer,SharedArrayBuffer)))return l(t,e,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,n);var i=function t(e){if(s.isBuffer(e)){var n=0|f(e.length),r=o(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||function(t){return t!=t}(e.length)?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return u(t),o(t<0?0:0|f(t))}function h(t){for(var e=t.length<0?0:0|f(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function l(t,e,n){var r;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),s.prototype),r}function f(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function $(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return O(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(t).length;default:if(i)return r?-1:O(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return w(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){var o;if(0===t.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),o=n=+n,o!=o&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return -1;n=t.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else -1!==h&&(o-=o-h),h=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){l=!1;break}if(l)return o}return -1}function g(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a,u=parseInt(e.substr(2*s,2),16);if(a=u,a!=a)break;t[n+s]=u}return s}function x(t,e,n,r){return N(O(e,t.length-n),t,n,r)}function _(t,e,n,r){return N(function t(e){for(var n=[],r=0;r<e.length;++r)n.push(255&e.charCodeAt(r));return n}(e),t,n,r)}function v(t,e,n,r){return N(P(e),t,n,r)}function b(t,e,n,r){return N(function t(e,n){for(var r,i,o,s=[],a=0;a<e.length&&!((n-=2)<0);++a)i=(r=e.charCodeAt(a))>>8,o=r%256,s.push(o),s.push(i);return s}(e,t.length-n),t,n,r)}function k(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(h=c);break;case 2:(192&(o=t[i+1]))==128&&(u=(31&c)<<6|63&o)>127&&(h=u);break;case 3:o=t[i+1],s=t[i+2],(192&o)==128&&(192&s)==128&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=l}return function t(e){var n=e.length;if(n<=4096)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<n;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(r)}function w(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function S(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=H[t[o]];return i}function B(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function A(t,e,n,r,i,o){if(!s.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw RangeError('"value" argument is out of bounds');if(n+r>t.length)throw RangeError("Index out of range")}function D(t,e,n,r,i,o){if(n+r>t.length||n<0)throw RangeError("Index out of range")}function I(t,e,n,i,o){return e=+e,n>>>=0,o||D(t,e,n,4,34028234663852886e22,-34028234663852886e22),r.write(t,e,n,i,23,4),n+4}function L(t,e,n,i,o){return e=+e,n>>>=0,o||D(t,e,n,8,17976931348623157e292,-17976931348623157e292),r.write(t,e,n,i,52,8),n+8}n.Buffer=s,n.SlowBuffer=function t(e){return+e!=e&&(e=0),s.alloc(+e)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function t(){try{var e=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(e,n),42===e.foo()}catch(r){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,n){return a(t,e,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,n){var r,i,s;return r=t,i=e,s=n,(u(r),r<=0)?o(r):void 0!==i?"string"==typeof s?o(r).fill(i,s):o(r).fill(i):o(r)},s.allocUnsafe=function(t){return c(t)},s.allocUnsafeSlow=function(t){return c(t)},s.isBuffer=function t(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function t(e,n){if(U(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),U(n,Uint8Array)&&(n=s.from(n,n.offset,n.byteLength)),!s.isBuffer(e)||!s.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,i=n.length,o=0,a=Math.min(r,i);o<a;++o)if(e[o]!==n[o]){r=e[o],i=n[o];break}return r<i?-1:i<r?1:0},s.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function t(e,n){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===n)for(r=0,n=0;r<e.length;++r)n+=e[r].length;var r,i=s.allocUnsafe(n),o=0;for(r=0;r<e.length;++r){var a=e[r];if(U(a,Uint8Array))o+a.length>i.length?s.from(a).copy(i,o):Uint8Array.prototype.set.call(i,a,o);else if(s.isBuffer(a))a.copy(i,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=a.length}return i},s.byteLength=$,s.prototype._isBuffer=!0,s.prototype.swap16=function t(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)d(this,n,n+1);return this},s.prototype.swap32=function t(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)d(this,n,n+3),d(this,n+1,n+2);return this},s.prototype.swap64=function t(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)d(this,n,n+7),d(this,n+1,n+6),d(this,n+2,n+5),d(this,n+3,n+4);return this},s.prototype.toString=function t(){var e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function t(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function t(){var e="",r=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(s.prototype[i]=s.prototype.inspect),s.prototype.compare=function t(e,n,r,i,o){if(U(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>e.length||i<0||o>this.length)throw RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return -1;if(n>=r)return 1;if(n>>>=0,r>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var a=o-i,u=r-n,c=Math.min(a,u),h=this.slice(i,o),l=e.slice(n,r),f=0;f<c;++f)if(h[f]!==l[f]){a=h[f],u=l[f];break}return a<u?-1:u<a?1:0},s.prototype.includes=function t(e,n,r){return -1!==this.indexOf(e,n,r)},s.prototype.indexOf=function t(e,n,r){return m(this,e,n,r,!0)},s.prototype.lastIndexOf=function t(e,n,r){return m(this,e,n,r,!1)},s.prototype.write=function t(e,n,r,i){if(void 0===n)i="utf8",r=this.length,n=0;else if(void 0===r&&"string"==typeof n)i=n,r=this.length,n=0;else if(isFinite(n))n>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-n;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return g(this,e,n,r);case"utf8":case"utf-8":return x(this,e,n,r);case"ascii":case"latin1":case"binary":return _(this,e,n,r);case"base64":return v(this,e,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,n,r);default:if(s)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},s.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function t(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),n<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<e&&(n=e);var i=this.subarray(e,n);return Object.setPrototypeOf(i,s.prototype),i},s.prototype.readUintLE=s.prototype.readUIntLE=function t(e,n,r){e>>>=0,n>>>=0,r||T(e,n,this.length);for(var i=this[e],o=1,s=0;++s<n&&(o*=256);)i+=this[e+s]*o;return i},s.prototype.readUintBE=s.prototype.readUIntBE=function t(e,n,r){e>>>=0,n>>>=0,r||T(e,n,this.length);for(var i=this[e+--n],o=1;n>0&&(o*=256);)i+=this[e+--n]*o;return i},s.prototype.readUint8=s.prototype.readUInt8=function t(e,n){return e>>>=0,n||T(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function t(e,n){return e>>>=0,n||T(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function t(e,n){return e>>>=0,n||T(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function t(e,n){return e>>>=0,n||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function t(e,n){return e>>>=0,n||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function t(e,n,r){e>>>=0,n>>>=0,r||T(e,n,this.length);for(var i=this[e],o=1,s=0;++s<n&&(o*=256);)i+=this[e+s]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*n)),i},s.prototype.readIntBE=function t(e,n,r){e>>>=0,n>>>=0,r||T(e,n,this.length);for(var i=n,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*n)),s},s.prototype.readInt8=function t(e,n){return(e>>>=0,n||T(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},s.prototype.readInt16LE=function t(e,n){e>>>=0,n||T(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function t(e,n){e>>>=0,n||T(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function t(e,n){return e>>>=0,n||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function t(e,n){return e>>>=0,n||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function t(e,n){return e>>>=0,n||T(e,4,this.length),r.read(this,e,!0,23,4)},s.prototype.readFloatBE=function t(e,n){return e>>>=0,n||T(e,4,this.length),r.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function t(e,n){return e>>>=0,n||T(e,8,this.length),r.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function t(e,n){return e>>>=0,n||T(e,8,this.length),r.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function t(e,n,r,i){if(e=+e,n>>>=0,r>>>=0,!i){var o=Math.pow(2,8*r)-1;A(this,e,n,r,o,0)}var s=1,a=0;for(this[n]=255&e;++a<r&&(s*=256);)this[n+a]=e/s&255;return n+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function t(e,n,r,i){if(e=+e,n>>>=0,r>>>=0,!i){var o=Math.pow(2,8*r)-1;A(this,e,n,r,o,0)}var s=r-1,a=1;for(this[n+s]=255&e;--s>=0&&(a*=256);)this[n+s]=e/a&255;return n+r},s.prototype.writeUint8=s.prototype.writeUInt8=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,1,255,0),this[n]=255&e,n+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,2,65535,0),this[n]=255&e,this[n+1]=e>>>8,n+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,2,65535,0),this[n]=e>>>8,this[n+1]=255&e,n+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,4,4294967295,0),this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e,n+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,4,4294967295,0),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},s.prototype.writeIntLE=function t(e,n,r,i){if(e=+e,n>>>=0,!i){var o=Math.pow(2,8*r-1);A(this,e,n,r,o-1,-o)}var s=0,a=1,u=0;for(this[n]=255&e;++s<r&&(a*=256);)e<0&&0===u&&0!==this[n+s-1]&&(u=1),this[n+s]=(e/a>>0)-u&255;return n+r},s.prototype.writeIntBE=function t(e,n,r,i){if(e=+e,n>>>=0,!i){var o=Math.pow(2,8*r-1);A(this,e,n,r,o-1,-o)}var s=r-1,a=1,u=0;for(this[n+s]=255&e;--s>=0&&(a*=256);)e<0&&0===u&&0!==this[n+s+1]&&(u=1),this[n+s]=(e/a>>0)-u&255;return n+r},s.prototype.writeInt8=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,1,127,-128),e<0&&(e=255+e+1),this[n]=255&e,n+1},s.prototype.writeInt16LE=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,2,32767,-32768),this[n]=255&e,this[n+1]=e>>>8,n+2},s.prototype.writeInt16BE=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,2,32767,-32768),this[n]=e>>>8,this[n+1]=255&e,n+2},s.prototype.writeInt32LE=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,4,2147483647,-2147483648),this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24,n+4},s.prototype.writeInt32BE=function t(e,n,r){return e=+e,n>>>=0,r||A(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},s.prototype.writeFloatLE=function t(e,n,r){return I(this,e,n,!0,r)},s.prototype.writeFloatBE=function t(e,n,r){return I(this,e,n,!1,r)},s.prototype.writeDoubleLE=function t(e,n,r){return L(this,e,n,!0,r)},s.prototype.writeDoubleBE=function t(e,n,r){return L(this,e,n,!1,r)},s.prototype.copy=function t(e,n,r,i){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var o=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(n,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),n),o},s.prototype.fill=function t(e,n,r,i){if("string"==typeof e){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){var o,a=e.charCodeAt(0);("utf8"===i&&a<128||"latin1"===i)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw RangeError("Out of range index");if(r<=n)return this;if(n>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=n;o<r;++o)this[o]=e;else{var u=s.isBuffer(e)?e:s.from(e,i),c=u.length;if(0===c)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-n;++o)this[o+n]=u[o%c]}return this};var F=/[^+/0-9A-Za-z-_]/g;function O(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319||s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function P(t){return e.toByteArray(function t(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function N(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length)&&!(i>=t.length);++i)e[i+n]=t[i];return i}function U(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function R(t){return t!=t}var H=function(){for(var t="0123456789abcdef",e=Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":10,buffer:11,ieee754:15}],13:[function(t,e,n){"use strict";let r=t("shallow-clone"),i=t("kind-of"),o=t("is-plain-object");e.exports=function t(e,n){switch(i(e)){case"object":return function e(n,r){if("function"==typeof r)return r(n);if(r||o(n)){let i=new n.constructor;for(let s in n)i[s]=t(n[s],r);return i}return n}(e,n);case"array":return function e(n,r){let i=new n.constructor(n.length);for(let o=0;o<n.length;o++)i[o]=t(n[o],r);return i}(e,n);default:return r(e)}}},{"is-plain-object":16,"kind-of":18,"shallow-clone":27}],14:[function(t,e,n){class r{async next(t){let e=this.createConsumer(t),n=await e.next();return e.return(),n}async once(t){let e=await this.next(t);return e.done&&await new Promise(()=>{}),e.value}createConsumer(){throw TypeError("Method must be overriden by subclass")}[Symbol.asyncIterator](){return this.createConsumer()}}e.exports=r},{}],15:[function(t,e,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?i-1:0,f=n?-1:1,$=t[e+l];for(l+=f,o=$&(1<<-h)-1,$>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+l],l+=f,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:($?-1:1)*(1/0);s+=Math.pow(2,r),o-=c}return($?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,f=23===i?5960464477539062e-23:0,$=r?0:o-1,p=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+l>=1?e+=f/u:e+=f*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+$]=255&a,$+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+$]=255&s,$+=p,s/=256,c-=8);t[n+$-p]|=128*d}},{}],16:[function(t,e,n){/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */ "use strict";var r=t("isobject");function i(t){return!0===r(t)&&"[object Object]"===Object.prototype.toString.call(t)}e.exports=function t(e){var n,r;return!1!==i(e)&&"function"==typeof(n=e.constructor)&&!1!==i(r=n.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")}},{isobject:17}],17:[function(t,e,n){/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */ "use strict";e.exports=function t(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},{}],18:[function(t,e,n){var r=Object.prototype.toString;function i(t){return"function"==typeof t.constructor?t.constructor.name:null}e.exports=function t(e){if(void 0===e)return"undefined";if(null===e)return"null";var n,o,s,a,u,c,h,l,f=typeof e;if("boolean"===f)return"boolean";if("string"===f)return"string";if("number"===f)return"number";if("symbol"===f)return"symbol";if("function"===f){return(n=e,"GeneratorFunction"===i(n))?"generatorfunction":"function"}if(s=e,Array.isArray?Array.isArray(s):s instanceof Array)return"array";if(a=e,a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a))return"buffer";if(function t(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(n){if(-1!==n.message.indexOf("callee"))return!0}return!1}(e))return"arguments";if(u=e,u instanceof Date||"function"==typeof u.toDateString&&"function"==typeof u.getDate&&"function"==typeof u.setDate)return"date";if(c=e,c instanceof Error||"string"==typeof c.message&&c.constructor&&"number"==typeof c.constructor.stackTraceLimit)return"error";if(h=e,h instanceof RegExp||"string"==typeof h.flags&&"boolean"==typeof h.ignoreCase&&"boolean"==typeof h.multiline&&"boolean"==typeof h.global)return"regexp";switch(i(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(l=e,"function"==typeof l.throw&&"function"==typeof l.return&&"function"==typeof l.next)return"generator";switch(f=r.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return f.slice(8,-1).toLowerCase().replace(/\s/g,"")}},{}],19:[function(t,e,n){"use strict";function r(){if(arguments.length)return r.from(arguments)}function i(){}o="An argument without append, prepend, or detach methods was given to `List",s=r.prototype,r.of=function(){return r.from.call(this,arguments)},r.from=function(t){var e,n,r,i=new this;if(t&&(e=t.length))for(n=-1;++n<e;)null!==(r=t[n])&&void 0!==r&&i.append(r);return i},s.head=null,s.tail=null,s.toArray=function(){for(var t=this.head,e=[];t;)e.push(t),t=t.next;return e},s.prepend=function(t){var e,n;if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw Error(o+"#prepend`.");return(e=this,n=e.head)?n.prepend(t):(t.detach(),t.list=e,e.head=t,t)},s.append=function(t){var e,n,r;if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw Error(o+"#append`.");return(e=this,r=e.tail)?r.append(t):(n=e.head)?n.append(t):(t.detach(),t.list=e,e.head=t,t)},r.Item=i;var o,s,a=i.prototype;a.next=null,a.prev=null,a.list=null,a.detach=function(){var t=this,e=t.list,n=t.prev,r=t.next;return e&&(e.tail===t&&(e.tail=n),e.head===t&&(e.head=r),e.tail===e.head&&(e.tail=null),n&&(n.next=r),r&&(r.prev=n),t.prev=t.next=t.list=null),t},a.prepend=function(t){if(!t||!t.append||!t.prepend||!t.detach)throw Error(o+"Item#prepend`.");var e=this,n=e.list,r=e.prev;return!!n&&(t.detach(),r&&(t.prev=r,r.next=t),t.next=e,t.list=n,e.prev=t,e===n.head&&(n.head=t),n.tail||(n.tail=e),t)},a.append=function(t){if(!t||!t.append||!t.prepend||!t.detach)throw Error(o+"Item#append`.");var e=this,n=e.list,r=e.next;return!!n&&(t.detach(),r&&(t.next=r,r.prev=t),t.prev=e,t.list=n,e.next=t,e!==n.tail&&n.tail||(n.tail=t),t)},e.exports=r},{}],20:[function(t,e,n){"use strict";e.exports=t("./_source/linked-list.js")},{"./_source/linked-list.js":19}],21:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var h=0;h<c;++h){var l,f,$,p,d=t[h].replace(a,"%20"),m=d.indexOf(n);m>=0?(l=d.substr(0,m),f=d.substr(m+1)):(l=d,f=""),$=decodeURIComponent(l),p=decodeURIComponent(f),r(s,$)?i(s[$])?s[$].push(p):s[$]=[s[$],p]:s[$]=p}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],22:[function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,a){return(e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t)?o(s(t),function(s){var a=encodeURIComponent(r(s))+n;return i(t[s])?o(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],23:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":21,"./encode":22}],24:[function(t,e,n){e.exports=function t(e){var n=[],r=[];return function t(e,i){var o,s,a;if("object"==typeof e&&null!==e&&!(e instanceof Boolean)&&!(e instanceof Date)&&!(e instanceof Number)&&!(e instanceof RegExp)&&!(e instanceof String)){for(o=0;o<n.length;o+=1)if(n[o]===e)return{$ref:r[o]};if(n.push(e),r.push(i),"[object Array]"===Object.prototype.toString.apply(e))for(o=0,a=[];o<e.length;o+=1)a[o]=t(e[o],i+"["+o+"]");else for(s in a={},e)Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=t(e[s],i+"["+JSON.stringify(s)+"]"));return a}return e}(e,"$")}},{}],25:[function(t,e,n){var r=t("./decycle"),i=function(){return!this}();function o(t,e){this.name="AuthTokenExpiredError",this.message=t,this.expiry=e,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function s(t){this.name="AuthTokenInvalidError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function a(t,e){this.name="AuthTokenNotBeforeError",this.message=t,this.date=e,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function u(t){this.name="AuthTokenError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function c(t){this.name="AuthError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function h(t,e){this.name="SilentMiddlewareBlockedError",this.message=t,this.type=e,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function l(t){this.name="InvalidActionError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function f(t){this.name="InvalidArgumentsError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function $(t){this.name="InvalidOptionsError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function p(t){this.name="InvalidMessageError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function d(t,e){this.name="SocketProtocolError",this.message=t,this.code=e,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function m(t){this.name="ServerProtocolError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function y(t){this.name="HTTPServerError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function g(t){this.name="ResourceLimitError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function x(t){this.name="TimeoutError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function _(t,e){this.name="BadConnectionError",this.message=t,this.type=e,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function v(t){this.name="BrokerError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function b(t,e){this.name="ProcessExitError",this.message=t,this.code=e,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}function k(t){this.name="UnknownError",this.message=t,Error.captureStackTrace&&!i?Error.captureStackTrace(this,arguments.callee):this.stack=Error().stack}o.prototype=Object.create(Error.prototype),s.prototype=Object.create(Error.prototype),a.prototype=Object.create(Error.prototype),u.prototype=Object.create(Error.prototype),c.prototype=Object.create(Error.prototype),h.prototype=Object.create(Error.prototype),l.prototype=Object.create(Error.prototype),f.prototype=Object.create(Error.prototype),$.prototype=Object.create(Error.prototype),p.prototype=Object.create(Error.prototype),d.prototype=Object.create(Error.prototype),m.prototype=Object.create(Error.prototype),y.prototype=Object.create(Error.prototype),g.prototype=Object.create(Error.prototype),x.prototype=Object.create(Error.prototype),_.prototype=Object.create(Error.prototype),v.prototype=Object.create(Error.prototype),b.prototype=Object.create(Error.prototype),k.prototype=Object.create(Error.prototype),e.exports={AuthTokenExpiredError:o,AuthTokenInvalidError:s,AuthTokenNotBeforeError:a,AuthTokenError:u,AuthError:c,SilentMiddlewareBlockedError:h,InvalidActionError:l,InvalidArgumentsError:f,InvalidOptionsError:$,InvalidMessageError:p,SocketProtocolError:d,ServerProtocolError:m,HTTPServerError:y,ResourceLimitError:g,TimeoutError:x,BadConnectionError:_,BrokerError:v,ProcessExitError:b,UnknownError:k},e.exports.socketProtocolErrorStatuses={1001:"Socket was disconnected",1002:"A WebSocket protocol error was encountered",1003:"Server terminated socket because it received invalid data",1005:"Socket closed without status code",1006:"Socket hung up",1007:"Message format was incorrect",1008:"Encountered a policy violation",1009:"Message was too big to process",1010:"Client ended the connection because the server did not comply with extension requirements",1011:"Server encountered an unexpected fatal condition",4e3:"Server ping timed out",4001:"Client pong timed out",4002:"Server failed to sign auth token",4003:"Failed to complete handshake",4004:"Client failed to save auth token",4005:"Did not receive #handshake from client before timeout",4006:"Failed to bind socket to message broker",4007:"Client connection establishment timed out",4008:"Server rejected handshake from client",4009:"Server received a message before the client handshake"},e.exports.socketProtocolIgnoreStatuses={1e3:"Socket closed normally",1001:"Socket hung up"};var C={domain:1,domainEmitter:1,domainThrown:1};e.exports.dehydrateError=function t(e,n){var i;if(e&&"object"==typeof e)for(var o in i={message:e.message},n&&(i.stack=e.stack),e)C[o]||(i[o]=e[o]);else i="function"==typeof e?"[function "+(e.name||"anonymous")+"]":e;return r(i)},e.exports.hydrateError=function t(e){var n=null;if(null!=e){if("object"==typeof e)for(var r in n=Error(e.message),e)e.hasOwnProperty(r)&&(n[r]=e[r]);else n=e}return n},e.exports.decycle=r},{"./decycle":24}],26:[function(t,e,n){(function(t){(function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=/^[ \n\r\t]*[{\[]/,i=function(t){for(var e=new Uint8Array(t),r=e.length,i="",o=0;o<r;o+=3)i+=n[e[o]>>2],i+=n[(3&e[o])<<4|e[o+1]>>4],i+=n[(15&e[o+1])<<2|e[o+2]>>6],i+=n[63&e[o+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},o=function(e,n){if(t.ArrayBuffer&&n instanceof t.ArrayBuffer)return{base64:!0,data:i(n)};if(t.Buffer){if(n instanceof t.Buffer)return{base64:!0,data:n.toString("base64")};if(n&&"Buffer"===n.type&&Array.isArray(n.data)){var r;return{base64:!0,data:(r=t.Buffer.from?t.Buffer.from(n.data):new t.Buffer(n.data)).toString("base64")}}}return n};e.exports.decode=function(t){if(null==t)return null;if("#1"===t||"#2"===t)return t;var e=t.toString();if(!r.test(e))return e;try{return JSON.parse(e)}catch(n){}return e},e.exports.encode=function(t){return"#1"===t||"#2"===t?t:JSON.stringify(t,o)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(t,e,n){(function(n){(function(){/*!
 * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */ "use strict";let r=Symbol.prototype.valueOf,i=t("kind-of");e.exports=function t(e,o){var s,a,u;switch(i(e)){case"array":return e.slice();case"object":return Object.assign({},e);case"date":return new e.constructor(Number(e));case"map":return new Map(e);case"set":return new Set(e);case"buffer":return function t(e){let r=e.length,i=n.allocUnsafe?n.allocUnsafe(r):n.from(r);return e.copy(i),i}(e);case"symbol":return s=e,r?Object(r.call(s)):{};case"arraybuffer":return function t(e){let n=new e.constructor(e.byteLength);return new Uint8Array(n).set(new Uint8Array(e)),n}(e);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return a=e,new a.constructor(a.buffer,a.byteOffset,a.length);case"regexp":return function t(e){let n=void 0!==e.flags?e.flags:/\w+$/.exec(e)||void 0,r=new e.constructor(e.source,n);return r.lastIndex=e.lastIndex,r}(e);case"error":return Object.create(e);default:return e}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:11,"kind-of":18}],28:[function(t,e,n){let r=t("consumable-stream");e.exports=class t extends r{constructor(t,e){super(),this.name=e,this._streamDemux=t}createConsumer(t){return this._streamDemux.createConsumer(this.name,t)}}},{"consumable-stream":14}],29:[function(t,e,n){let r=t("writable-consumable-stream"),i=t("./demuxed-consumable-stream");e.exports=class t{constructor(){this._mainStream=new r}write(t,e){this._mainStream.write({stream:t,data:{value:e,done:!1}})}close(t,e){this._mainStream.write({stream:t,data:{value:e,done:!0}})}closeAll(t){this._mainStream.close(t)}writeToConsumer(t,e){this._mainStream.writeToConsumer(t,{consumerId:t,data:{value:e,done:!1}})}closeConsumer(t,e){this._mainStream.closeConsumer(t,{consumerId:t,data:{value:e,done:!0}})}getConsumerStats(t){return this._mainStream.getConsumerStats(t)}getConsumerStatsList(t){return this._mainStream.getConsumerStatsList().filter(e=>e.stream===t)}getConsumerStatsListAll(){return this._mainStream.getConsumerStatsList()}kill(t,e){let n=this.getConsumerStatsList(t),r=n.length;for(let i=0;i<r;i++)this.killConsumer(n[i].id,e)}killAll(t){this._mainStream.kill(t)}killConsumer(t,e){this._mainStream.killConsumer(t,e)}getBackpressure(t){let e=this.getConsumerStatsList(t),n=e.length,r=0;for(let i=0;i<n;i++){let o=e[i];o.backpressure>r&&(r=o.backpressure)}return r}getBackpressureAll(){return this._mainStream.getBackpressure()}getConsumerBackpressure(t){return this._mainStream.getConsumerBackpressure(t)}hasConsumer(t,e){let n=this._mainStream.getConsumerStats(e);return!!n&&n.stream===t}hasConsumerAll(t){return this._mainStream.hasConsumer(t)}createConsumer(t,e){let n=this._mainStream.createConsumer(e),r=n.next;n.next=async function(){for(;;){let e=await r.apply(this,arguments);if(e.value&&(e.value.stream===t||e.value.consumerId===this.id))return e.value.data.done&&this.return(),e.value.data;if(e.done)return e}};let i=n.getStats;n.getStats=function(){let e=i.apply(this,arguments);return e.stream=t,e};let o=n.applyBackpressure;n.applyBackpressure=function(e){if(e.value&&(e.value.stream===t||e.value.consumerId===this.id)){o.apply(this,arguments);return}e.done&&o.apply(this,arguments)};let s=n.releaseBackpressure;return n.releaseBackpressure=function(e){if(e.value&&(e.value.stream===t||e.value.consumerId===this.id)){s.apply(this,arguments);return}e.done&&s.apply(this,arguments)},n}stream(t){return new i(this,t)}}},{"./demuxed-consumable-stream":28,"writable-consumable-stream":36}],30:[function(t,e,n){var r=t("./v1"),i=t("./v4"),o=i;o.v1=r,o.v4=i,e.exports=o},{"./v1":33,"./v4":34}],31:[function(t,e,n){for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=function t(e,n){var i=n||0,o=r;return[o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]]].join("")}},{}],32:[function(t,e,n){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);e.exports=function t(){return r(i),i}}else{var o=Array(16);e.exports=function t(){for(var e,n=0;n<16;n++)(3&n)==0&&(e=4294967296*Math.random()),o[n]=e>>>((3&n)<<3)&255;return o}}},{}],33:[function(t,e,n){var r,i,o=t("./lib/rng"),s=t("./lib/bytesToUuid"),a=0,u=0;e.exports=function t(e,n,c){var h=n&&c||0,l=n||[],f=(e=e||{}).node||r,$=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==$){var p=o();null==f&&(f=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==$&&($=i=(p[6]<<8|p[7])&16383)}var d=void 0!==e.msecs?e.msecs:new Date().getTime(),m=void 0!==e.nsecs?e.nsecs:u+1,y=d-a+(m-u)/1e4;if(y<0&&void 0===e.clockseq&&($=$+1&16383),(y<0||d>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,u=m,i=$;var g=((268435455&(d+=122192928e5))*1e4+m)%4294967296;l[h++]=g>>>24&255,l[h++]=g>>>16&255,l[h++]=g>>>8&255,l[h++]=255&g;var x=d/4294967296*1e4&268435455;l[h++]=x>>>8&255,l[h++]=255&x,l[h++]=x>>>24&15|16,l[h++]=x>>>16&255,l[h++]=$>>>8|128,l[h++]=255&$;for(var _=0;_<6;++_)l[h+_]=f[_];return n||s(l)}},{"./lib/bytesToUuid":31,"./lib/rng":32}],34:[function(t,e,n){var r=t("./lib/rng"),i=t("./lib/bytesToUuid");e.exports=function t(e,n,o){var s=n&&o||0;"string"==typeof e&&(n="binary"===e?Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var u=0;u<16;++u)n[s+u]=a[u];return n||i(a)}},{"./lib/bytesToUuid":31,"./lib/rng":32}],35:[function(t,e,n){class r{constructor(t,e,n,r){this.id=e,this._backpressure=0,this.stream=t,this.currentNode=n,this.timeout=r,this.isAlive=!0,this.stream.setConsumer(this.id,this)}getStats(){let t={id:this.id,backpressure:this._backpressure};return null!=this.timeout&&(t.timeout=this.timeout),t}_resetBackpressure(){this._backpressure=0}applyBackpressure(t){this._backpressure++}releaseBackpressure(t){this._backpressure--}getBackpressure(){return this._backpressure}write(t){void 0!==this._timeoutId&&(clearTimeout(this._timeoutId),delete this._timeoutId),this.applyBackpressure(t),this._resolve&&(this._resolve(),delete this._resolve)}kill(t){void 0!==this._timeoutId&&(clearTimeout(this._timeoutId),delete this._timeoutId),this._killPacket={value:t,done:!0},this._destroy(),this._resolve&&(this._resolve(),delete this._resolve)}_destroy(){this.isAlive=!1,this._resetBackpressure(),this.stream.removeConsumer(this.id)}async _waitForNextItem(t){return new Promise((e,n)=>{this._resolve=e;let r;if(void 0!==t){let i=Error("Stream consumer iteration timed out");(async()=>{var e;let o,s,a=(e=t,s=new Promise(t=>{o=setTimeout(t,e)}),{timeoutId:o,promise:s});r=a.timeoutId,await a.promise,i.name="TimeoutError",delete this._resolve,n(i)})()}this._timeoutId=r})}async next(){for(this.stream.setConsumer(this.id,this);;){if(!this.currentNode.next)try{await this._waitForNextItem(this.timeout)}catch(t){throw this._destroy(),t}if(this._killPacket){this._destroy();let e=this._killPacket;return delete this._killPacket,e}if(this.currentNode=this.currentNode.next,this.releaseBackpressure(this.currentNode.data),!this.currentNode.consumerId||this.currentNode.consumerId===this.id)return this.currentNode.data.done&&this._destroy(),this.currentNode.data}}return(){return delete this.currentNode,this._destroy(),{}}[Symbol.asyncIterator](){return this}}e.exports=r},{}],36:[function(t,e,n){let r=t("consumable-stream"),i=t("./consumer");e.exports=class t extends r{constructor(){super(),this.nextConsumerId=1,this._consumers={},this._tailNode={next:null,data:{value:void 0,done:!1}}}_write(t,e,n){let r={data:{value:t,done:e},next:null};n&&(r.consumerId=n),this._tailNode.next=r,this._tailNode=r;let i=Object.values(this._consumers),o=i.length;for(let s=0;s<o;s++)i[s].write(r.data)}write(t){this._write(t,!1)}close(t){this._write(t,!0)}writeToConsumer(t,e){this._write(e,!1,t)}closeConsumer(t,e){this._write(e,!0,t)}kill(t){let e=Object.keys(this._consumers),n=e.length;for(let r=0;r<n;r++)this.killConsumer(e[r],t)}killConsumer(t,e){let n=this._consumers[t];n&&n.kill(e)}getBackpressure(){let t=Object.values(this._consumers),e=t.length,n=0;for(let r=0;r<e;r++){let i=t[r].getBackpressure();i>n&&(n=i)}return n}getConsumerBackpressure(t){let e=this._consumers[t];return e?e.getBackpressure():0}hasConsumer(t){return!!this._consumers[t]}setConsumer(t,e){this._consumers[t]=e,e.currentNode||(e.currentNode=this._tailNode)}removeConsumer(t){delete this._consumers[t]}getConsumerStats(t){let e=this._consumers[t];if(e)return e.getStats()}getConsumerStatsList(){let t=[],e=Object.values(this._consumers),n=e.length;for(let r=0;r<n;r++){let i=e[r];t.push(i.getStats())}return t}createConsumer(t){return new i(this,this.nextConsumerId++,this._tailNode,t)}}},{"./consumer":35,"consumable-stream":14}],"socketcluster-client":[function(t,e,n){let r=t("./lib/clientsocket"),i=t("./lib/factory"),o="16.0.4";e.exports.factory=i,e.exports.AGClientSocket=r,e.exports.create=function(t){return i.create({...t,version:o})},e.exports.version=o},{"./lib/clientsocket":2,"./lib/factory":3}]},{},["socketcluster-client"])("socketcluster-client")});